{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    devshell.url = "github:numtide/devshell";
    flake-parts.url = "github:hercules-ci/flake-parts";
  };

  outputs = { self, nixpkgs, devshell, flake-parts, ... } @ inputs:
    flake-parts.lib.mkFlake { inherit inputs; } {
      imports = [
        devshell.flakeModule
      ];

      systems = [
        "x86_64-linux"
      ];

      perSystem = { pkgs, system, ... }: let
        deps = with pkgs; rec {
          dev = [
            cloc
            timg
            just
            bc
            eplot
            gnuplot
            openai-whisper
          ] ++ ci;
          ci = [
          ];
        };
      in {
        packages = {
          ci = pkgs.writeShellApplication {
            name = "ci";
            runtimeInputs = deps.ci;
            text = /* bash */ ''
                            just ci
                            '';
          };
        };
        devshells.default = {extraModulesPath, ...}@args: {
          imports = ["${extraModulesPath}/language/ruby.nix"];

          language.ruby.package = pkgs.ruby_3_4;

          # motd = ''


          #            ==================================
          #             I N F I N I T E    D U N G E O N
          #            ==================================

          # '';

          motd = ''


####################################################################
#............###..................###..............................#
#............###..................###..............................#
####...###....##...######...###....##...###...######...###...#######
####...###.....#...######...###.....#...###...######...###...#######
####...###............###...###.........###...######...###......####
####...###............###...###.........###...######...###......####
####...###...#.....######...###...#.....###...######...###...#######
####...###...##....######...###...##....###...######...###...#######
#............###...###............###............###...###.........#
#............###...###............###............###...###.........#
#....#####...###......###...######...............###...###...###...#
#.....####...###......###...#####................##.....##...###...#
#...#..###...###.......##...###....####....#######...#...#....##...#
#...##..##...###........#...##....#####....######...###........#...#
#...###..#...###............#....##...........###...###............#
#...###......###......#.........#####.........###...###......#.....#
#...##...#...###......##........#####...#..######...###......##....#
#...#...###.......#...###...#....##....##..#######...#...#...###...#
#......#####.....##...###...##........###........##.....##...###...#
#.....#######...###...###...###......####........###...###...###...#
####################################################################


          '';
          packages = deps.dev;
        };
      };
    };
}
